import{c as l,a as h,b as e,F as d,r,e as c,f as k,o as a,_ as b,t as i,g as m}from"../index-1414b55d.js";import{e as _,f as p,h as g,i as f,j as v}from"../adminHelper-32c12dca.js";/* empty css               */const C={key:0,class:"uk-container uk-align-center"},O=e("h1",{class:"uk-text-center"},"Pedidos",-1),y={class:"uk-container"},P=e("br",null,null,-1),A={class:"uk-container"},D=e("h3",null,"Pedidos Activos",-1),w={class:"items-table uk-table uk-table-divider uk-table-striped uk-table-hover"},$=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Precio"),e("th",null,"Estado"),e("th",null,"Fecha"),e("th",null,"Nombre cliente"),e("th",null,"Acciones")])],-1),E=["id"],F=["onClick"],N=["onClick"],S=["onClick"],q=["onClick"],j={class:"uk-container"},B=e("h3",null,"Pedidos Terminados",-1),V={class:"items-table uk-table uk-table-divider uk-table-striped uk-table-hover"},L=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Precio"),e("th",null,"Estado"),e("th",null,"Fecha"),e("th",null,"Nombre Cliente"),e("th",null,"Acciones")])],-1),R=["id"],T=["onClick"],z=["onClick"],G={data(){return{user:{},allActiveOrders:[],allFinishedOrders:[]}},mounted(){k.on("userObj",s=>{this.user=s,this.checkAdmin()}),this.setPageData()},methods:{checkAdmin(){(!this.user||!this.user.admin==1)&&(alert("Necesitas ser administrador para ver esta pagina."),window.location="/")},async setPageData(){this.allActiveOrders=await _(),this.allFinishedOrders=await p()},async deletePedido(s){confirm(`¿Está seguro que desea borrar el pedido con id ${s}?`)&&await g(s)>0&&this.setPageData()},async cancelarPedido(s){confirm(`¿Está seguro que desea CANCELAR el pedido con id ${s}?`)&&await f(s)&&this.setPageData()},viewOrder(s){window.location.href=`/admin/orders/viewOrder.html?orderId=${s}`},async changeState(s,n){let o=n==1?"en proceso":"terminado";confirm(`Seguro que quiere cambiar el estado del pedido ${s} a '${o}'?`)&&await v(s,n)&&this.setPageData()}}},H=Object.assign(G,{__name:"orders",setup(s){return(n,o)=>(a(),l(d,null,[h(b),n.user&&n.user.admin?(a(),l("main",C,[O,e("div",y,[e("button",{class:"uk-position-center uk-button uk-button-small uk-button-secondary",onClick:o[0]||(o[0]=t=>n.setPageData())},"Recargar pedidos")]),P,e("div",A,[D,e("table",w,[$,(a(),l("tbody",{key:n.allActiveOrders},[(a(!0),l(d,null,r(n.allActiveOrders,t=>(a(),l("tr",{key:t.id,id:t.id},[e("td",null,[e("b",null,i(t.id),1)]),e("td",null,i(t.precio_total),1),e("td",null,i(t.estado),1),e("td",null,i(t.fecha),1),e("td",null,i(t.username),1),e("td",null,[e("button",{class:"uk-button uk-button-small uk-button-secondary",onClick:u=>n.viewOrder(t.id)}," Detalle / Editar",8,F),e("button",{class:"uk-button uk-button-small uk-button-danger",onClick:u=>n.cancelarPedido(t.id)}," Cancelar ",8,N),t.estado=="en proceso"?(a(),l("button",{key:0,class:"uk-button uk-button-small uk-button-danger",onClick:u=>n.changeState(t.id,2)}," Poner: Terminado ",8,S)):c("",!0),t.estado=="recibido"?(a(),l("button",{key:1,class:"uk-button uk-button-small uk-button-primary",onClick:u=>n.changeState(t.id,1)}," Poner: En proceso ",8,q)):c("",!0)])],8,E))),128))]))])]),e("div",j,[B,e("table",V,[L,(a(),l("tbody",{key:n.allFinishedOrders},[(a(!0),l(d,null,r(n.allFinishedOrders,t=>(a(),l("tr",{key:t.id,id:t.id},[e("td",null,[e("b",null,i(t.id),1)]),e("td",null,i(t.precio_total),1),e("td",null,i(t.estado),1),e("td",null,i(t.fecha),1),e("td",null,i(t.username),1),e("td",null,[e("button",{class:"uk-button uk-button-small uk-button-secondary",onClick:u=>n.viewOrder(t.id)}," Detalle",8,T),e("button",{class:"uk-button uk-button-small uk-button-danger",onClick:u=>n.deletePedido(t.id)}," Eliminar ",8,z)])],8,R))),128))]))])])])):c("",!0)],64))}}),I=m(H);I.mount("#app");
