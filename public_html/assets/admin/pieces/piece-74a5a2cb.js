import{c as s,a as c,b as a,e as n,F as l,i as d,f as p,h as u,o as r,_ as m,g as h}from"../../index-1414b55d.js";import{k as g,m as b}from"../../adminHelper-32c12dca.js";/* empty css                  */const B=a("h1",{class:"uk-text-center"},"Nuevo Bocata",-1),f=d('<div class="uk-margin"><label for="nombreBocata">Nombre</label><input class="uk-input" name="nombreBocata" id="nombreBocata" type="text" placeholder="Nombre Bocata"></div><div class="uk-margin"><label for="ingredientesBocata">Ingredientes</label><input class="uk-input" name="ingredientesBocata" id="ingredientesBocata" type="text" placeholder="Ingredientes Bocata"></div><div class="uk-margin"><label for="precioBocata">Precio: </label><input class="uk-input uk-form-width-small" name="precioBocata" id="precioBocata" type="number" placeholder="Precio"> â‚¬ </div><div class="uk-margin"><label for="descripcionBocata">Descripcion</label><textarea id="descripcionBocata" name="descripcionBocata" class="uk-textarea" rows="3" placeholder="Breve descripcion del bocata"></textarea></div>',4),k={class:"uk-margin"},v={"uk-form-custom":"target: true"},_=a("label",{for:""},"Imagen: ",-1),P=a("input",{class:"uk-input uk-form-width-medium",type:"text",placeholder:"Elige imagen","aria-label":"Custom controls",disabled:""},null,-1),y=a("button",{type:"submit",class:"uk-button uk-button-primary uk-width-1-1"}," Guardar ",-1),D={data(){return{user:{},img:null,targetPiece:null,pieceData:null}},mounted(){p.on("userObj",e=>{this.user=e,this.checkAdmin()}),this.targetPiece=g("pieceId"),this.setPageData(this.targetPiece)},methods:{checkAdmin(){(!this.user||!this.user.admin==1)&&(alert("Necesitas ser administrador para ver esta pagina."),window.location="/")},handleImageUpload(e){this.img=e.target.files[0]},async setPageData(e){this.pieceData=await b(e),this.pieceData&&($("input#nombreBocata").val(this.pieceData[1]),$("input#ingredientesBocata").val(this.pieceData[2]),$("input#precioBocata").val(this.pieceData[3]),$("textarea#descripcionBocata").val(this.pieceData[5]))},submitForm(e){e.preventDefault(),this.targetPiece?modifyPiece(this.targetPiece):this.createNewPiece()},modifyPiece(e){},createNewPiece(){u.post("http://api.bocafast.io/set/pieces/createPiece.php",{nombreBocata:$("input#nombreBocata").val(),ingredientesBocata:$("input#ingredientesBocata").val(),precioBocata:$("input#precioBocata").val(),descripcionBocata:$("textarea#descripcionBocata").val(),imagenBocata:this.img},{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{console.log(e.data)}).catch(e=>{})}}},N=Object.assign(D,{__name:"piece",setup(e){return(t,i)=>(r(),s(l,null,[c(m),t.user&&t.user.admin?(r(),s("main",{class:"uk-container uk-align-center",key:t.user},[B,a("form",{id:"bocataForm",onSubmit:i[1]||(i[1]=(...o)=>t.submitForm&&t.submitForm(...o))},[f,a("div",k,[a("div",v,[_,a("input",{onChange:i[0]||(i[0]=(...o)=>t.handleImageUpload&&t.handleImageUpload(...o)),type:"file","aria-label":"Custom controls"},null,32),P])]),y],32)])):n("",!0)],64))}}),w=h(N);w.mount("#app");
